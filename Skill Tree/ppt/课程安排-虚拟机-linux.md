# 课程安排-虚拟机-Linux安装

## 课程安排讲解


### **课程用时**

90天，16周
周一到周五是讲课时间，上午9点到12点，下午2点到5点。
上午一般是讲课时间，下午是实验时间。上午开始前会有前一天学习情况了解时间，晚上结束前会有当天问题解决时间。
在晚上可以自己回顾当天的知识，预习第二天的课程。

### **课程大阶段**
* > 第一阶段，环境搭建与基础知识，1-2周

	学习linux基础命令，php，mysql，js。
	每个人搭建一套自己的环境，为以后测试建立基础。

* > 第二阶段，渗透测试与Web安全，3-9周

	掌握整个渗透测试流程并熟悉常见的Web漏洞、内网渗透方式，掌握一些渗透工具。
	在学习完这一段课程后，大家就有了自己做测试的能力，可以独立的完成一些测试。
	可以和同学一块完成一些渗透测试。

* > 第三阶段，拓展能力，10-11周
	
	学习代码审计、Python语言开发等拓展能力。
	现在很多的黑客都是一些只会使用别人开发的工具去做一些渗透
	它们可能完全不懂这些漏洞的原理，更不用说自己编写出自己的安全工具。
	我们的学生毕业后不会成为这种脚本小子，可以自己编写工具。随机应变

* > 第四阶段，企业安全实训，12-16周
	
	学习企业中常见的安全基线检查与加固，
	安全运维职位相关的工作能容，
	并对等级保护和风险控制等内容有所了解。
	交给大家学习这些知识，是为了以后大家在工作的过程中可以更好的适应工作中遇到的情况。

### **提问方法**

在学习的过程中，大家肯定会遇到很多的问题，遇到问题如何去解决，
首先，思考你的问题是什么，不要没找到问题根源就问别人，浪费别人和自己的时间。
之后，可以去谷歌百度搜索问题，寻找答案
如果找到答案，在这个过程中可能会遇到很多不懂的知识，就要有寻求知识的欲望，会不断的成长。
谷歌百度找不到结果，有三个可能，问题很难，或者没找到问题的根源所在，提问了错误的问题，或者不会用搜索引擎。
学习的时候多交流，在向别人请教的时候，注意别人在干什么，有没有时间来给你解答问题。
同学之间一定要互相交流，再给别人讲解问题的时候，会加强自己的理解。


## 了解操作系统

科普一下机基础知识，讲一下计算机硬软件，引入操作系统.
计算机简单的组成硬软件，操作系统是干什么的，方便人类与计算机之间交流。
两大类：类Unix和Windows
	Linux、OS X、属于类Unix
	Windows PC、Windows Server属于Windwos

### **Windows**

Windows操作系统的分类，service类和PC类。

* > PC类

	XP Win7 Win8 Win10
	最早接触的系统是XP，XP为人们服务了很多年，
	虽然3年前微软停止了对XP系统的更新，但是还是有一些地方在使用这Win XP系统，比如银行的ATM机，柜台办理业务的电脑，车站的售票机。因为它们的系统更新比较慢，Win XP可以满足它们的需求。
	Win7 Win10 可能大家就在使用。

* > Server类

	Windows Server常被用作服务器系统，比较老的有2003、2008、2012，常被用来搭建IIS,SQLServer服务器。
	Windows Server拥有图形化的界面，方便人们更好的操作系统，被人们所欢迎，同时IIS也很容易搭建网站。
	所以有很多Windows服务器。
	有一些同学可能已经在学校学习过IIS，可以回忆一下，自己尝试搭建一个简单的服务器。
	没有学习过的同学，在之后的课程中也会学习，也可以自己使用搜索引擎来学习搭建。
	自己搭建IIS服务器，显示一个静态网站（自选）。课下练习。

### **类Unix**

Linux、OS X、属于类Unix

### **Linux系统**
* > 在类Unix系统中我们重点学习Linux，Linux引入时，讲一下unix，linux起源

	unix是很古老的一个操作系统，但是它不是免费的，因此不被人们所接受。
	Linux系统的起源是一个叫Linus的学生编写的课程作业，由于unix系统的种种限制， 
	Linus在写完Linux的内核之后，把它分享给世界各地的人们，一起来维护更新这个系统。


* > 随着系统的升级，出现了很多的Linux版本，现在我们常见的有两个系列：

	Redhat，基于Redhat出现了Centos。
	Centos是redhat的web服务器版，专门为web服务器而发布的版本。
	我们之后在学习的时候，会选择centos作为学习系统，它常见，方便之后大家做渗透测试。

	Debian，基于Debian出现了Ubuntu，kali，Deepin等一系列产品。
	Debian中ubuntu使用比较广，它有图形界面，办公方便，免费，企业已开始使用，ubuntu还有server版，作为web服务器。
	Ubuntu也被用来作为web服务器，但是没有Centos常见。


* >	推荐大家安装使用kali Linux。

	kali是一个专门为渗透人员准备的linux系统，里面有很多渗透测试工具,Kali是为渗透人员准备的系统，里面集成工具，不需要一个个安装，解决了linux安装部分软件麻烦的问题。


## VMware虚拟机

VMware虚拟机是一种利用软件来模拟物理硬件并运行真实操作体统的虚拟技术。

### 实验环境

- 操作机：`Linux Centos 6.5`

- 软件：`VMware Workstation 12Pro`

### **Vmware常用功能**

* > 介绍这些基础功能，
	* 基础
		新建一个虚拟机
		在最上方有快捷菜单和缩略图


	* 重点
		如何打开文件里的虚拟机，
		暂停虚拟机，
		克隆功能

	* 扩展
		首选项，个性化定制。
		在设置中，修改配置，达到定制自己的虚拟机。


### **安装Linux-Centos6.5**

* > 新建虚拟机

![1][1]

* > 选择系统版本

![2][2]
 
* > 硬盘和内存分配
	硬盘是怎么回事，它并不会占用系统中很对的存储空间，它是虚拟的硬盘空间，
	虚拟机会把系统文件存储到一组文件里。
	内存分配，虚拟机会使用真实主机的内存空间。

![3][3]
![4][4]

* > 选择挂载镜像

![5][5]

* > 开启虚拟机
	开启虚拟机后，会进入到安装界面，引导安装系统
	不进行磁盘检查。
![6][6]


* > 由于Centos6.5之后，系统安装就是图形化的安装方式
	我们选择语言，键盘，存储设备
	把数据写入到存储设备
![7][7]
![8][8]

* > 给我们的系统起名字，并且选择时区
	之后设置系统密码，记得设置一个安全的密码。

![9][9]
![10][10]
![11][11]

* > 我们是在虚拟机内安装系统，所有的硬盘都是给系统使用
	所以选择所有的磁盘来安装系统
![12][12]

* > 开始系统自动安装
	在配置好系统之后，我们开始自动安装系统。

![13][13]


### **玩游戏-键盘侦探**

打开浏览器，搜索游戏

### **尝试进行系统操作**
由于刚完了键盘侦探游戏，所以会Linux系统有一定的认识。


* > 快照   ----》 第一次快照
	* 快照基础：
	快照是什么，它是一个功能，可以把当前虚拟机的状态保留下来，之后可以利用还原功能把系统还原
	操作：快照的保存与还原

![14][14]

* > 开启系统

	进入到登录界面，一个黑框。
	开始会有我们的主机名称，在安装的时候设置的系统名称

![15][15]

* > 登入系统
	在开始部分显示我们的用户名，之后是主机名，~是我们的家目录。
	和Windows一样，每个用户都有自己的目录

![16][16]
![17][17]

* > 介绍使用pwd命令
	它是显示我们当前所在的位置

![18][18]

* > 由pwd结果引入，介绍 / 目录下文件夹dev和etc
	介绍ls和cd命令类似于win下打开C盘，看到里面的内容

![19][19]
![20][20]

* > 使用电脑上网，用ping命令测试网络连通
	ping www.baidu.com

![21][21]

* > 引入ifconfig命令，它是用来检查网卡 
	它的结果中只有一个 lo 
	介绍 lo是本地网卡，代表自己，
	使用 ping localhost 
	ping 127.0.0.1
	介绍本地地址

![23][23]

* > 刚说名etc下存放网卡信息
	使用cd命令进入到配置目录
	介绍tab补全快捷方式

![24][24]


* > 打开lo网卡的配置文件，和eth0配置文件对比
	发现onboot选项是可以让网卡开机自启动

![25][25]

* > 使用VI编辑修改文件

	VI基础操作-简单操作，达到修改网络链接配置文件的目的即可

	简单的VI修改文件，i开始插入文件内容，:wq保存并退出文档
	esc退出编辑

![26][26]

* > 在修改完成网卡的配置文件后，记得建立快照
	* 重要
	快照管理器的使用、多快照分支

![33][33]


* > 可以成功的链接互联网
	ping www.baidu.com

* > 为centos系统配置静态的IP
	因为为了方便以后ssh链接，同时作为一个服务器，尽量使用静态的地址，方便以后访问。


## 下午
### **实验**

* part1 根据上午实验，搭建一台自己的操作系统，自行选择（kali，ubuntu/centos，建议kali。
	安装好之后配置网络，可以访问外网，并实现两台主机之间互通。（默认网络模式---NAT）
	第一步完成之后，介绍NAT与桥接Brige模式，与其他VMware网络控制功能中的网络配置模式

![31][31]

	使用其他网络模式进行测试，观察网络互通情况

### **尝试配置静态的网络**

讲解什么是nat网络，什么是静态网络

### **VMware网络**

vmware为我们提供了三种网络工作模式，它们分别是：`Bridged（桥接模式）`,`NAT（网络地址转换模式）`,`Host-Only（仅主机模式）`

`Bridged（桥接模式）`下的虚拟机于主机是同一个网段，类似于物理机一样

`NAT（网络地址转换模式）`下的虚拟机于主机不同网段，类似于主机是虚拟机的路由

`Host-Only（仅主机模式）`下的虚拟机于主机不同网段，只能与主机和同网段通信，类似于同一内网区域

![27][27]

![28][28]
![29][29]

* > 利用快照还原功能恢复到初始状态
	* 重点，可以使用快照的还原功能

![34][34]


* > 修改配置文件设置静态IP

![30][30]


* > 修改配置文件后，建立快照
	* 重要
	可以看到快照的分支。

![35][35]

* > 虚拟机的快照功能，在建立多个快照后，就像一个个的分支
	可以方便的切换快照，这是很重要的

![36][36]

* part2 使用桥接网络搭建主机，尝试链接周围的同学，分析为什么可以链接。
	注意：桥接模式时，会出现IP冲突，正常，有助加深桥接模式理解

![32][32]



### **实验问题**

	在实验的过程中可能会遇到的问题
	桥接过程中，可能两个同学之间不能ping通，可能原因是防火墙


### **实验中可能学会的东西**

	在实验中，通过模拟内网环境，可以了解到内网和外网的区别
	在以后的渗透测试中，更好的进行内网测试



[1]:./image/1.png
[2]:./image/2.png
[3]:./image/3.png
[4]:./image/4.png
[5]:./image/5.png
[6]:./image/6.png
[7]:./image/7.png
[8]:./image/8.png
[9]:./image/9.png
[10]:./image/10.png
[11]:./image/11.png
[12]:./image/12.png
[13]:./image/13.png
[14]:./image/14.png
[15]:./image/15.png
[16]:./image/16.png
[17]:./image/17.png
[18]:./image/18.png
[19]:./image/19.png
[20]:./image/20.png
[21]:./image/21.png
[22]:./image/22.png
[23]:./image/23.png
[24]:./image/24.png
[25]:./image/25.png
[26]:./image/26.png
[27]:./image/27.png
[28]:./image/28.png
[29]:./image/29.png
[30]:./image/30.png
[31]:./image/31.png
[32]:./image/32.png
[33]:./image/33.png
[34]:./image/34.png
[35]:./image/35.png
[36]:./image/36.png
